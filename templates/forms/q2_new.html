<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Diagnosis Result</title>

  <!-- Favicons -->
  <link href="{{ url_for('static', filename='image/DermiDetect.png') }}" rel="icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700|Raleway:300,400,500,700|Poppins:300,400,500,600,700" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap-icons.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='boxicons.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='glightbox.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='remixicon.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='swiper-bundle.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

  <style>
    body {
      background: linear-gradient(120deg, #f8fffa 0%, #e6f9f3 100%);
      min-height: 100vh;
      padding-top: 90px; /* Prevent navbar overlap */
    }
    th, td {
      padding: 15px;
    }
    .portfolio-info {
      background: #fff;
      padding: 36px 32px;
      border-radius: 20px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.13);
      transition: box-shadow 0.3s;
      border: 1px solid #e3e3e3;
      margin-top: 16px;
      margin-bottom: 16px;
      animation: fadeInUp 0.7s cubic-bezier(.39,.575,.56,1.000) both;
    }
    .portfolio-info:hover {
      box-shadow: 0 16px 48px rgba(0,0,0,0.19);
    }
    @keyframes fadeInUp {
      0% { opacity: 0; transform: translateY(40px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    .btn-primary {
      background: linear-gradient(90deg, #009961 0%, #00b371 100%);
      border: none;
      color: #fff;
      font-weight: 700;
      padding: 12px 32px;
      border-radius: 32px;
      box-shadow: 0 2px 8px rgba(0,153,97,0.10);
      transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
      font-size: 1.1rem;
      letter-spacing: 0.5px;
    }
    .btn-primary:hover {
      background: linear-gradient(90deg, #00b371 0%, #009961 100%);
      box-shadow: 0 4px 16px rgba(0,153,97,0.18);
      transform: translateY(-2px) scale(1.03);
    }
    .alert {
      font-size: 1.25rem;
      border-radius: 14px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.09);
      border: none;
      padding: 22px 24px;
      margin-bottom: 0.5rem;
      animation: fadeInUp 0.7s cubic-bezier(.39,.575,.56,1.000) both;
      font-weight: 600;
      letter-spacing: 0.2px;
    }
    .alert-danger {
      background: linear-gradient(90deg, #ff5858 0%, #ffb199 100%);
      color: #fff;
      border-left: 6px solid #ff5858;
    }
    .alert-success {
      background: linear-gradient(90deg, #43e97b 0%, #38f9d7 100%);
      color: #222;
      border-left: 6px solid #43e97b;
    }
    .alert-warning {
      background: linear-gradient(90deg, #f7971e 0%, #ffd200 100%);
      color: #222;
      border-left: 6px solid #f7971e;
    }
    .img-fluid.rounded.shadow-sm.border {
      border-radius: 20px !important;
      box-shadow: 0 4px 24px rgba(0,153,97,0.13);
      border: 2px solid #e3e3e3;
      margin-bottom: 18px;
      transition: box-shadow 0.2s;
    }
    .img-fluid.rounded.shadow-sm.border:hover {
      box-shadow: 0 8px 32px rgba(0,153,97,0.19);
    }
    .form-label {
      font-weight: 700;
      color: #009961;
      font-size: 1.1rem;
    }
    .container.mb-5 {
      background: #f8f9fa;
      border-radius: 18px;
      box-shadow: 0 2px 16px rgba(0,0,0,0.06);
      padding: 36px 28px 22px 28px;
      margin-top: 36px;
      margin-bottom: 36px;
    }
    .diagnosis-title {
      font-size: 2rem;
      font-weight: 800;
      color: #009961;
      margin-bottom: 18px;
      letter-spacing: 0.5px;
      text-shadow: 0 2px 8px rgba(0,153,97,0.07);
    }
    .breadcrumbs {
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.04);
      background: #f4fdf9;
    }
  </style>
</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top header-inner-pages">
    <div class="container-fluid">
      <div class="row justify-content-center">
        <div class="col-xl-9 d-flex align-items-center justify-content-lg-between">
          <h1 class="logo me-auto me-lg-0"><a href="/">SkinCancer</a></h1>
          <nav id="navbar" class="navbar order-last order-lg-0">
            <ul>
              <li><a class="nav-link scrollto" href="/try_now">SkinSense</a></li>
              <li><a class="nav-link scrollto" href="https://www.sciencedirect.com/science/article/pii/S2949713224000582">Learn</a></li>
            </ul>
            <i class="bi bi-list mobile-nav-toggle"></i>
          </nav>
        </div>
      </div>
    </div>
  </header>
  
  <!-- Botpress Webchat Integration -->
  <script src="https://cdn.botpress.cloud/webchat/v3.2/inject.js" defer></script>
  <script src="https://files.bpcontent.cloud/2025/07/27/03/20250727032034-LU2VUI2U.js" defer></script>

  <main id="main">

    <!-- ======= Breadcrumbs ======= -->
    <section id="breadcrumbs" class="breadcrumbs mt-5">
      <div class="container">
        <ol>
          <li><a href="/">Home</a></li>
          <li><a href="/try_now">SkinSense</a></li>
          <li>Diagnosis Results</li>
        </ol>
        <h2>Diagnosis Results</h2>
      </div>
    </section>

    <!-- ======= Upload Form Section ======= -->
    <section class="container mb-5">
      <div class="card shadow-sm p-4" style="border-radius: 20px; background: #fff; max-width: 520px; margin: 0 auto;">
        <form action="/q2" method="POST" enctype="multipart/form-data">
          <div class="mb-3 text-center">
            <div style="font-size: 2.5rem; color: #009961; margin-bottom: 10px;">
              <i class="bi bi-cloud-arrow-up-fill"></i>
            </div>
            <label for="file" class="form-label">Upload a new image for diagnosis:</label>
            <input type="file" name="file" id="file" class="form-control" required style="margin: 0 auto; max-width: 320px;">
          </div>
          <div class="text-center">
            <button type="submit" class="btn btn-primary">Diagnose</button>
          </div>
        </form>
      </div>
    </section>

    <!-- ======= Diagnosis Section ======= -->
    {% if filename and diagnosis %}
    <section id="diagnosis-results" class="portfolio-details py-5 bg-light">
      <div class="container">
        <div class="row gy-4 align-items-center">
          <!-- Image -->
          <div class="col-lg-7 text-center">
            <div class="portfolio-details-slider">
              <div class="swiper-wrapper align-items-center">
                <div class="swiper-slide">
                  <img src="{{ url_for('static', filename='image/' + filename) }}" alt="Uploaded image" class="img-fluid rounded shadow-sm border" style="max-height: 340px; object-fit: contain; background: #f8f9fa;">
                </div>
              </div>
            </div>
          </div>
          <!-- Diagnosis Card -->
          <div class="col-lg-5">
            <div class="portfolio-info text-center">
              <div class="diagnosis-title mb-3">Skin Cancer Diagnosis</div>
              <div class="alert {% if 'Melanoma' in diagnosis %}alert-danger{% elif 'Benign' in diagnosis %}alert-success{% else %}alert-warning{% endif %}" role="alert">
                <strong>{{ diagnosis }}</strong>
              </div>
              {% if cancer_info %}
              <div class="mb-3 mt-2" style="font-size: 1.08rem; color: #444; background: #f8f9fa; border-radius: 10px; padding: 12px 16px; box-shadow: 0 1px 6px rgba(0,153,97,0.07);">
                <i class="bi bi-info-circle-fill" style="color: #009961; margin-right: 6px;"></i>
                {{ cancer_info }}
              </div>
              {% endif %}
              {% if confidence %}
              <div class="progress my-3" style="height: 22px; border-radius: 12px;">
                <div id="confidence-bar" class="progress-bar bg-success" role="progressbar" style="font-weight: 700; font-size: 1.1rem; border-radius: 12px; width: 0;" aria-valuenow="{{ confidence }}" aria-valuemin="0" aria-valuemax="100">{{ confidence }}%</div>
              </div>
              <p class="mb-0 text-muted">Model confidence</p>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    </section>
    {% endif %}

  </main>

  <!-- ======= Footer ======= -->
  <footer id="footer" class="mt-5 bg-dark text-white py-4">
    <div class="container text-center">
      <h3>SkinCancer</h3>
      <p>Our technology at your service on your fingertips</p>
      <div class="social-links mb-2">
        <a href="#" class="facebook text-white me-3"><i class="bx bxl-facebook"></i></a>
        <a href="#" class="instagram text-white me-3"><i class="bx bxl-instagram"></i></a>
        <a href="#" class="twitter text-white"><i class="bx bxl-twitter"></i></a>
      </div>
      <p class="mb-0">&copy; 2025 SkinCancer Project. All rights reserved.</p>
    </div>
  </footer>

  <!-- ======= JS Files ======= -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" crossorigin="anonymous"></script>
  <script src="{{ url_for('static', filename='purecounter_vanilla.js') }}"></script>
  <script src="{{ url_for('static', filename='bootstrap.bundle.min.js') }}"></script>
  <script src="{{ url_for('static', filename='glightbox.min.js') }}"></script>
  <script src="{{ url_for('static', filename='isotope.pkgd.min.js') }}"></script>
  <script src="{{ url_for('static', filename='swiper-bundle.min.js') }}"></script>
  <script src="{{ url_for('static', filename='validate.js') }}"></script>
  <script src="{{ url_for('static', filename='main.js') }}"></script>


  <!-- Set progress bar width via JS to avoid linter errors -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var bar = document.getElementById('confidence-bar');
      if (bar && bar.textContent.includes('%')) {
        var percent = parseInt(bar.textContent);
        if (!isNaN(percent)) {
          bar.style.width = percent + '%';
        }
      }
    });
  </script>
  <!-- Botpress Webchat Integration -->
  <script src="https://cdn.botpress.cloud/webchat/v3.2/inject.js" defer></script>
  <script src="https://files.bpcontent.cloud/2025/07/27/03/20250727032034-LU2VUI2U.js" defer></script>

</body>

</html>
